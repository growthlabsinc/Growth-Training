# Story 4.1: Manual Session Logging Screen & Logic

**Status:** Draft

## Goal & Context

**User Story:** As a User, I want to manually log a training session, including the method, duration, date/time, and personal notes, so I can keep a record of my practice.

**Context:**
This story introduces the ability for users to log their training sessions in the Growth app. The log includes method, duration, date/time, and notes, and is saved to Firestore under the authenticated user's ID. This is foundational for progress tracking and future analytics features.

## Detailed Requirements

- Design and implement a "Log Session" screen.
- Fields to include:
  - Date & Time of session (default to now, but allow user to change).
  - Growth Method Practiced (user can select from a list of methods fetched from Firestore).
  - Class of Method (if applicable, e.g., if a method has sub-variants - TBD if needed for MVP, can be part of method name).
  - Duration (e.g., using a number input or picker for minutes).
  - Subjective User Feedback/Notes (multi-line text input).
  - (Optional MVP) Mood Check-in before/after (simple selection - to be integrated from Gamification Epic).
- Save the logged session data to a `sessionLogs` collection in Firestore, associated with the authenticated user's ID.
- Ensure data is stored securely and privately.
- Provide clear confirmation to the user upon successful logging.
- UI adheres to `docs/style-guide.md` and `docs/ui-ux-spec.md`.

## Acceptance Criteria (ACs)

- AC1: User can access the Log Session screen.
- AC2: User can select the date/time, method, enter duration, and add notes.
- AC3: Session log is successfully saved to Firestore under the correct user ID.
- AC4: User receives confirmation after saving a log.
- AC5: Input validation is present (e.g., duration must be a positive number).

## Technical Implementation Context

**Guidance:**
- **Relevant Files:**
  - New: `Growth/Features/SessionLogging/Views/LogSessionView.swift`
  - New/Update: `Growth/Core/Models/SessionLog.swift`
  - Update: `Growth/Core/Services/FirestoreService.swift`
  - Reference: `docs/style-guide.md`, `docs/ui-ux-spec.md`, Figma
- **Key Technologies:**
  - SwiftUI (for UI)
  - Firestore (for data storage)
  - Firebase Auth (for user ID)
- **UI/UX Notes:**
  - Use modern, accessible form controls per style guide
  - Show loading/confirmation states
  - Validate all required fields before enabling save
- **Data Structure:**
  - SessionLog model: userId, methodId, methodName, dateTime, duration, notes, (optional: mood)
- **Security:**
  - Only authenticated users can log sessions
  - Data is private to the user

## Tasks / Subtasks

- [ ] Create `LogSessionView` SwiftUI view
- [ ] Implement form fields and validation
- [ ] Fetch methods list from Firestore for selection
- [ ] Save session log to Firestore with user ID
- [ ] Show confirmation on success
- [ ] Add/Update unit tests for form and save logic

## Testing Requirements

- **Unit/Integration Tests:**
  - Test that all fields are validated and required
  - Test that session logs are saved correctly
  - Test error handling for failed saves
- **Manual/CLI Verification:**
  - Verify UI matches Figma and style guide
  - Verify correct data is saved in Firestore

## Story Wrap Up (Agent Populates After Execution)

- **Agent Model Used:** <Agent Model Name/Version>
- **Completion Notes:**
- **Change Log:**
  - Initial Draft 