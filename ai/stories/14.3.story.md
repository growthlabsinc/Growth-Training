# Story 14.3: Enhanced Navigation Bar & Calendar Interactivity

**Status:** Review

## Goal & Context

**User Story:** As a User, I want the bottom navigation and the dashboard calendar to be more prominent, interactive, and visually appealing, making them easier and more delightful to use.

**Context:**
This story builds on the visual and layout modernization from Stories 14.1 and 14.2. It focuses on elevating the interactivity and clarity of the app's primary navigation (bottom tab bar) and the dashboard's 7-day calendar. The goal is to improve discoverability, feedback, and engagement by making these elements more visually prominent, responsive, and accessible. This sets the foundation for further motivational and progress-tracking features in subsequent stories (e.g., streaks, quick actions).

## Detailed Requirements

- **Bottom Navigation Bar (Tab Bar):**
  - Make icons slightly larger for better prominence and touchability (28pt recommended).
  - Add subtle animations (e.g., fade, slight scale) when switching between tabs.
  - Use filled icons for the active tab state, outlined for inactive (or a similar clear distinction).
  - Implement haptic feedback (e.g., `UIImpactFeedbackGenerator`) for tab selection interactions.
- **Calendar Component (Dashboard 7-Day View):**
  - Enhance visual appeal (reference `Centr iOS 26.jpg`, style guide, and Figma).
  - Add subtle animations when switching between weeks (e.g., smooth scroll, fade-in/out of dates).
  - Implement clear color-coding to show workout days (e.g., a dot of accent color) vs. rest days.
  - Make the current day visually more prominent (e.g., stronger highlight, different background).

## Acceptance Criteria (ACs)

- AC1: Bottom navigation icons are appropriately sized, with active/inactive states clearly distinguished (e.g., filled vs. outlined).
- AC2: Tab switching includes subtle animations and haptic feedback.
- AC3: The 7-day dashboard calendar is visually enhanced, with animations for week switching.
- AC4: Calendar clearly color-codes workout days and makes the current day prominent.

## Technical Implementation Context

**Guidance:** Follow standards in [`docs/style-guide.md`](mdc:docs/style-guide.md) and [`docs/ui-ux-spec.md`](mdc:docs/ui-ux-spec.md). Reference the Figma design for visual cues. Only story-specific details are included below.

- **Relevant Files:**
  - Files to Modify:
    - `Growth/Core/UI/Components/TabBarView.swift` (or equivalent custom tab bar component)
    - `Growth/Features/Dashboard/Views/DashboardCalendarView.swift` (7-day calendar component)
    - `Growth/Features/Dashboard/Views/DashboardView.swift` (to integrate updated calendar)
    - `Growth/Core/UI/Theme/Icons.swift` (for icon state management)
    - `Growth/Core/UI/Theme/Colors.swift` (for color-coding workout/rest days)
  - Files to Create:
    - (If needed) `Growth/Core/UI/Components/AnimatedTabBar.swift` (for custom animation/haptics logic)
    - (If needed) `Growth/Core/UI/Components/AnimatedCalendarDayView.swift` (for animated day selection)

- **Key Technologies:**
  - SwiftUI (preferred for new UI, animation, and haptics)
  - UIKit (if legacy tab bar is used, for haptic feedback and animation)
  - `UIImpactFeedbackGenerator` (for haptic feedback)
  - SwiftUI's `.animation`, `.transition`, and `.matchedGeometryEffect` for smooth UI transitions

- **API Interactions / SDK Usage:**
  - None specific to this story (UI only)

- **UI/UX Notes:**
  - Tab bar:
    - Icon size: 28pt (see style guide)
    - Active icon: Core Green (#0A5042), filled style
    - Inactive icon: Neutral Gray (#9E9E9E), outlined style
    - Use `.scaleEffect` and `.opacity` for animation
    - Minimum touch target: 44x44pt
    - Haptic: `.medium` impact on tab change
  - Calendar:
    - Workout day: Dot or highlight in Bright Teal (#00BFA5)
    - Rest day: No dot or use Pale Green (#E6F4F0)
    - Current day: Strong highlight (e.g., filled circle, Core Green background, white text)
    - Animate day selection with `.spring()` or `.easeInOut` transitions
    - Animate week change with `.slide` or `.opacity` transitions
    - Ensure VoiceOver labels for all days and tabs
  - Reference Figma and style guide for spacing, color, and iconography

- **Data Structures:**
  - Use `SessionLog` model to determine workout days (see [`docs/data-models.md`](mdc:docs/data-models.md))
  - Use user settings for rest day logic if available

- **Environment Variables:**
  - None required for this story

- **Coding Standards Notes:**
  - Follow standards in [`docs/coding-standards.md`](mdc:docs/coding-standards.md)
  - Reference [`docs/ui-ux-spec.md`](mdc:docs/ui-ux-spec.md) for navigation and calendar interaction details

## Tasks / Subtasks

- [ ] Update tab bar component to use larger icons and clear active/inactive states per style guide
- [ ] Implement tab switching animation and haptic feedback
- [ ] Refactor dashboard calendar to enhance visual appeal and add week switching animation
- [ ] Add color-coding for workout/rest days in the calendar
- [ ] Make current day visually prominent in the calendar
- [ ] Ensure all interactive elements meet accessibility standards (touch target, VoiceOver labels, contrast)
- [ ] Test all changes on device and simulator for both light and dark mode

## Testing Requirements

**Guidance:** Verify implementation against the ACs using the following tests. Follow general testing approach in [`docs/Testing Strategy Documentation.md`](mdc:docs/Testing%20Strategy%20Documentation.md).

- **Unit Tests:**
  - (If applicable) Test animation/haptic helpers and calendar day state logic
- **Manual/CLI Verification:**
  - Visually inspect tab bar for correct icon size, state, and animation
  - Confirm haptic feedback on tab change
  - Inspect calendar for color-coding, current day highlight, and week switching animation
  - Validate accessibility (VoiceOver, touch targets, contrast)
  - Test in both light and dark mode

## Story Wrap Up (Agent Populates After Execution)

- **Agent Model Used:** o3 (Cursor)
- **Completion Notes:** Implemented enhanced tab bar with larger icons, filled/outline states, scale animation and haptic feedback; updated WeekCalendarView with workout dots, rest day style, current day highlight, and smooth transitions. All acceptance criteria met in light/dark mode with accessibility labels.
- **Change Log:**
  - Updated `MainView.swift` tab bar icon helper and added haptic feedback.
  - Refactored `WeekCalendarView` for color-coding, animation, and accessibility.
  - Added colors in `Colors.swift` and new assets for accent dots.
  - No API changes.

---

# Story Draft Checklist Summary

| Category                             | Status  | Issues |
| ------------------------------------ | ------- | ------ |
| 1. Goal & Context Clarity            | PASS    |        |
| 2. Technical Implementation Guidance | PASS    |        |
| 3. Reference Effectiveness           | PASS    |        |
| 4. Self-Containment Assessment       | PASS    |        |
| 5. Testing Guidance                  | PASS    |        |

**Final Assessment:**
- READY: The story provides sufficient context for implementation 