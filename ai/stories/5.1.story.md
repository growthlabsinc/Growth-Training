# Story 5.1: Educational Resources Listing Screen

**Status:** Complete

## Goal & Context

**User Story:** As a User, I want to browse a list or categorized view of available educational articles, so I can easily find and select topics I'm interested in learning more about.

**Context:** This story initiates Epic 5 by creating the main entry point for users to access educational content. It will establish a new tab in the app for "Learn" or "Resources" and display a list of articles fetched from Firestore. This screen will serve as the foundation for viewing individual articles (Story 5.2) and will be populated by content defined in Story 5.3.

## Detailed Requirements

- Design and implement an "Educational Resources" or "Learn" screen.
- This screen should be accessible as a new primary tab in the app's main navigation.
- Fetch educational article metadata (title, category, short summary, thumbnail placeholder) from the `educationalResources` collection in Firestore.
- Display articles in a list. Each list item should clearly present the article's title, a short summary, and its category. A placeholder for a thumbnail image should be included.
- Consider allowing articles to be grouped by categories (e.g., "Vascular Health Basics," "Safety & Best Practices," "Understanding Progress") or providing filtering options if feasible for MVP.
- Each item in the list must be tappable and navigate to the Article View Screen (to be implemented in Story 5.2), passing the `resourceId` of the selected article.
- UI should follow `docs/style-guide.md` and `docs/ui-ux-spec.md`, focusing on a calm, professional, and readable presentation.
- If no articles are available in Firestore, display a user-friendly message (e.g., "No educational resources available at the moment. Please check back later.").

## Acceptance Criteria (ACs)

- AC1: A new "Learn" (or similar, TBD) tab is present in the main app navigation, leading to the Educational Resources screen.
- AC2: The Educational Resources screen displays a list of available articles fetched from the `educationalResources` Firestore collection, showing title, summary, and category for each.
- AC3: Tapping an article in the list successfully navigates to a placeholder or the upcoming Article View screen, correctly passing the `resourceId`.
- AC4: If the `educationalResources` collection is empty or returns no articles, a clear, user-friendly message is displayed on the screen.
- AC5: The UI is clean, organized, adheres to the application's style guide (`docs/style-guide.md`), and UX principles (`docs/ui-ux-spec.md`).
- AC6: Basic loading and error states (e.g., for Firestore fetch) are handled gracefully.

## Technical Implementation Context

**Guidance:** Use the following details for implementation. Developer agent is expected to follow project standards in `docs/coding-standards.md` (implicitly, not explicitly referenced here) and understand the project structure. Only story-specific details are included below.

- **Relevant Files:**
  - Files to Create:
    - `Growth/Features/EducationalResources/Views/EducationalResourcesListView.swift` (Main view for listing articles)
    - `Growth/Features/EducationalResources/ViewModels/EducationalResourcesListViewModel.swift` (Handles fetching and preparing data)
    - Consider a new `EducationalResourceRowView.swift` for individual list items if complex.
  - Files to Modify:
    - `Growth/MainView.swift` (or equivalent main tab container) to add the new "Learn" tab.
    - Potentially `Growth/Core/Services/FirestoreService.swift` if new fetch methods specific to `EducationalResource` are needed (though existing generic methods might suffice).

- **Key Technologies:**
  - SwiftUI for UI implementation.
  - Combine or async/await for data fetching and state management in the ViewModel.
  - Firebase Firestore for data persistence.

- **API Interactions / SDK Usage:**
  - Firebase Firestore SDK:
    - Query the `educationalResources` collection.
    - Listen for real-time updates or perform a one-time fetch.
    - Refer to `docs/data-models.md` for the `EducationalResource` model structure.

- **UI/UX Notes:**
  - The screen should have a clear title (e.g., "Learn", "Resources").
  - List items should be easily tappable with sufficient touch targets.
  - Visual styling for list items (cards, rows) should align with `docs/style-guide.md`.
  - Prioritize readability: use appropriate fonts (from `AppTheme.Typography`) and spacing.
  - The "Learn" tab icon should be distinct and intuitive (refer to `docs/ui-ux-spec.md` for navigation icon guidance).

- **Data Structures:**
  - Utilize the `EducationalResource` struct defined in `docs/data-models.md`:
    ```swift
    struct EducationalResource: Codable, Identifiable {
        let id: String // resourceId
        let title: String
        let contentText: String // For Story 5.2, but summary might be derived or a new field
        let category: ResourceCategory
        let visualPlaceholderUrl: String?
        // Consider adding a 'summary: String?' field to the model if not deriving from contentText
    }

    enum ResourceCategory: String, Codable {
        case basics = "basics"
        case technique = "technique"
        case science = "science"
        case safety = "safety"
        case progression = "progression"
    }
    ```
  - The ViewModel will likely publish an array: `[EducationalResource]`.

- **Environment Variables:**
  - No new environment variables specific to this story are anticipated. Firebase configuration is app-wide.

- **Coding Standards Notes:**
  - Follow general project coding standards.
  - Implement appropriate error handling for data fetching.
  - Ensure ViewModel logic is testable.

## Tasks / Subtasks

- [ ] Define the new "Learn" tab in the app's main navigation structure (`MainView.swift`).
- [ ] Create `EducationalResourcesListViewModel.swift`.
  - [ ] Implement logic to fetch `EducationalResource` metadata from the `educationalResources` collection in Firestore.
  - [ ] Publish the fetched resources (or an empty state/error message).
  - [ ] Handle loading states.
- [ ] Create `EducationalResourcesListView.swift`.
  - [ ] Observe the ViewModel for data.
  - [ ] Display a list of `EducationalResource` items.
    - [ ] For each item, show title, summary (derived or from a dedicated field), and category.
    - [ ] Include a placeholder for a thumbnail image.
  - [ ] Implement navigation to the (future) Article View screen, passing the `resourceId`.
  - [ ] Display a user-friendly message if no articles are available.
  - [ ] Display loading indicators and error messages as appropriate.
- [ ] Create `EducationalResourceRowView.swift` (optional, if list items are complex).
- [ ] Ensure UI adheres to `docs/style-guide.md` and `docs/ui-ux-spec.md`.
- [ ] Add basic unit tests for the ViewModel logic.

## Testing Requirements

**Guidance:** Verify implementation against the ACs using the following tests. Follow general testing approach in `docs/testing-strategy.md`.

- **Unit Tests:**
  - Test `EducationalResourcesListViewModel`:
    - Mock `FirestoreService` to simulate successful data fetch. Verify published resources.
    - Simulate Firestore error. Verify error state is published.
    - Simulate empty data response. Verify empty state is handled.
- **UI Tests (Manual for MVP):**
  - Manually verify navigation to the new "Learn" tab.
  - Verify articles (if seeded in Firestore) are listed correctly with title, summary, category.
  - Verify tapping an article attempts navigation (even if to a placeholder view initially).
  - Verify the "no articles" message appears if Firestore is empty.
  - Verify visual styling against the style guide.
  - Verify loading and error states are displayed correctly.

## Story Wrap Up (Agent Populates After Execution)

- **Agent Model Used:** `<Agent Model Name/Version>`
- **Completion Notes:** {Any notes about implementation choices, difficulties, or follow-up needed}
- **Change Log:**
  - Initial Draft by Gemini 2.5 Pro (YYYY-MM-DD) 