# Story 12.6: Add Functional 7-Day Calendar to Dashboard View

**Status:** Draft

## Goal & Context

**User Story:** As a User, I want to see a 7-day interactive calendar on my Dashboard, so I can quickly view my activity for the week and navigate to different days.

**Context:** The Dashboard is the main screen users see when opening the app, but currently lacks a quick way to view and navigate between days in the current week. This story adds a modern, user-friendly 7-day calendar component to enhance the user experience, allowing them to quickly see their activity patterns throughout the week and navigate between days. This feature will complement the existing full calendar view (Epic 4, Story 4.4) by providing a more accessible, quick-view option directly on the Dashboard.

## Detailed Requirements

- Design and implement a horizontal, scrollable 7-day calendar view component to be displayed prominently on the Dashboard screen.
- The calendar should display the current week by default (e.g., Monday to Sunday, or rolling 7 days with today highlighted).
- Allow users to tap on a day in this 7-day view.
- Tapping a day should:
  - Visually select/highlight that day in the 7-day calendar.
  - Potentially filter or update other content on the Dashboard to reflect activity/plans for the selected day (for MVP, this might just be visual selection).
- Indicate days where sessions were logged (e.g., a dot beneath the date, similar to the full calendar view in Epic 4, Story 4.4, but simplified for the 7-day view).
- Allow navigation to previous/next weeks within this 7-day view (e.g., via swipe gestures or < > arrow buttons).
- Refer to the provided `Centr iOS 26.jpg` image for visual inspiration regarding the horizontal 7-day selector.
- UI should adhere to `docs/style-guide.md` and integrate seamlessly with the overall Dashboard design.

## Acceptance Criteria (ACs)

- AC1: A horizontal 7-day calendar is displayed on the Dashboard.
- AC2: The current day is highlighted by default.
- AC3: Users can tap on a day to select it, and the selection is visually indicated.
- AC4: Users can navigate to previous/next weeks in the 7-day calendar.
- AC5: Days with logged sessions are visually marked in the 7-day calendar.
- AC6: The calendar design is consistent with the app's style guide and inspired by the provided image.
- AC7: (Stretch for MVP, or for future iteration) Tapping a day updates a relevant section of the dashboard to show data/activities for the selected date.

## Technical Implementation Context

**Guidance:** Developer must follow project standards in `docs/coding-standards.md` and structure described in `docs/project-structure.md`.

- **Relevant Files:**
  - Modify:
    - `Growth/Features/Dashboard/Views/DashboardView.swift` - to integrate the new calendar component
    - `Growth/Features/Dashboard/ViewModels/DashboardViewModel.swift` (if it exists) - to handle date selection logic
  - Create:
    - `Growth/Features/Dashboard/Components/WeekCalendarView.swift` - to implement the 7-day calendar component
    - `Growth/Features/Dashboard/ViewModels/WeekCalendarViewModel.swift` - to manage the calendar state and logic

- **Key Technologies:** SwiftUI, MVVM, Combine, Date manipulation, SwiftUI animations

- **API Interactions / SDK Usage:**
  - Use `FirestoreService.getSessionLogs(userId:startDate:endDate:)` or similar to fetch session logs for selected date ranges.
  - The existing session log queries should be leveraged to determine which days have activity.

- **UI/UX Notes:**
  - The component should be responsive and work well on both iPhone and iPad.
  - Use AppTheme colors and typography consistent with the rest of the app.
  - Follow Apple's Human Interface Guidelines for touch targets (minimum 44x44 points).
  - Ensure smooth animations when transitioning between weeks.
  - Provide appropriate accessibility labels for VoiceOver support.

- **Data Structures:**
  - Use Swift's `Date` and `Calendar` APIs for date calculations.
  - Create a lightweight `DayViewModel` struct to represent each day in the calendar:
    ```swift
    struct DayViewModel: Identifiable {
        let id = UUID()
        let date: Date
        let isToday: Bool
        let hasActivity: Bool
        let isSelected: Bool
    }
    ```

- **Environment Variables:** None new.

## Tasks / Subtasks

- [ ] Create the WeekCalendarView SwiftUI component
  - [ ] Implement horizontal layout with day cells
  - [ ] Add current day indicator styling
  - [ ] Add selection highlight styling
  - [ ] Add activity indicator styling (dot beneath date)
- [ ] Create the WeekCalendarViewModel
  - [ ] Implement date calculations for 7-day view
  - [ ] Add logic to generate the array of DayViewModel objects
  - [ ] Implement week navigation (previous/next)
  - [ ] Add selection state management
- [ ] Integrate WeekCalendarView into DashboardView
  - [ ] Determine optimal placement in view hierarchy
  - [ ] Wire up selection callbacks
  - [ ] Ensure proper sizing and spacing
- [ ] Implement session log indicator functionality
  - [ ] Query session logs for the visible week
  - [ ] Update calendar UI to show activity indicators
  - [ ] Handle loading states appropriately
- [ ] Implement week navigation
  - [ ] Add left/right arrows or swipe gesture
  - [ ] Animate transitions between weeks
- [ ] Add accessibility support
  - [ ] Provide proper VoiceOver labels
  - [ ] Test with VoiceOver turned on
- [ ] (Stretch) Implement dashboard content filtering
  - [ ] Update relevant sections when day is selected
  - [ ] Show loading indicators during content updates

## Testing Requirements

- **Manual Testing:**
  - Verify calendar appears correctly on Dashboard on iPhone and iPad simulators
  - Test in portrait and landscape orientations
  - Test in light and dark mode
  - Verify today is properly highlighted
  - Verify selection works when tapping different days
  - Verify week navigation works in both directions
  - Verify activity indicators appear correctly for days with logged sessions
  - Test with accessibility features enabled

- **Unit Tests:**
  - Test WeekCalendarViewModel date calculations
  - Test week navigation logic
  - Test day selection logic
  - Test conversion between dates and visual representations

- **UI Tests (optional):**
  - Verify calendar appears when Dashboard loads
  - Test day selection by tapping
  - Test week navigation

## Story Wrap Up (Agent Populates After Execution)

- **Agent Model Used:** `<Agent Model Name/Version>`
- **Completion Notes:** 
- **Change Log:**
  - Initial Draft 