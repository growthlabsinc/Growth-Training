# Story 7.1: Basic Timer UI & Functionality

**Status:** In Progress

## Goal & Context

**User Story:** As a User, I want a simple timer screen with start, pause, resume, and reset/stop controls, so I can time my exercises.

**Context:**
This story is the first step in Epic 7, which aims to provide users with method-specific timers to help them accurately perform their exercises and log time. In this initial story, we'll implement the basic timer UI and functionality that will serve as the foundation for more advanced features in subsequent stories.

The timer will function as a stopwatch (counting up from zero) by default. Later stories will extend this to handle countdown timers and interval-based timers with method-specific configurations.

## Requirements

1. **Timer Screen Design**
   - Create a new "Timer" screen that follows the app's style guide (`docs/style-guide.md`)
   - The screen should have a clean, focused UI with minimal distractions
   - Implement a large, easy-to-read digital time display showing minutes and seconds (MM:SS)

2. **Basic Timer Controls**
   - Start button: Begins the timer from 00:00 (stopwatch mode)
   - Pause/Resume button: Toggles between pausing and resuming the timer
     - Button text/icon changes based on timer state (e.g., "Pause" when running, "Resume" when paused)
   - Reset/Stop button: Resets the timer to 00:00 and stops it
   - All buttons should have clear visual states and appropriate accessibility labels

3. **Timer Functionality**
   - Implement a timer service that accurately tracks elapsed time
   - Timer should continue running when app is backgrounded (within OS limits)
   - If the app is terminated while the timer is running, display an appropriate notification on next launch
   - The timer should update the UI at least once per second

4. **Navigation & Integration**
   - Add a timer icon to the navigation menu for direct access
   - Allow launching the timer from Method Detail screens (without method-specific configuration for this story)

5. **Visual Design**
   - Follow the style guide in `docs/style-guide.md`
   - Use Core Green (#0A5042) for primary action buttons
   - Incorporate animation for timer transitions between states
   - Include visual indicators of timer state (running, paused, stopped)

## Acceptance Criteria

- **AC1:** Timer displays time accurately in MM:SS format with updates at least once per second
- **AC2:** Start button begins the timer from 00:00
- **AC3:** Pause/Resume button correctly toggles the timer state with appropriate visual changes
- **AC4:** Reset/Stop button resets the timer to 00:00 and stops it
- **AC5:** Timer continues to run when the app is briefly backgrounded
- **AC6:** UI elements are clear, usable, and adhere to the style guide
- **AC7:** Timer screen is accessible through the navigation menu and from Method Detail screens
- **AC8:** Timer functionality works correctly on both iOS 15+ and 16+ devices

## Technical Implementation Context

### Files to Create

1. **Models:**
   - `Growth/Features/Timer/Models/TimerState.swift` - Enum for timer states (running, paused, stopped)

2. **Services:**
   - `Growth/Features/Timer/Services/TimerService.swift` - Service to handle timer functionality, including background mode

3. **ViewModels:**
   - `Growth/Features/Timer/ViewModels/TimerViewModel.swift` - ViewModel for the timer screen

4. **Views:**
   - `Growth/Features/Timer/Views/TimerView.swift` - Main timer screen
   - `Growth/Features/Timer/Views/Components/TimerDisplayView.swift` - Component for the digital time display
   - `Growth/Features/Timer/Views/Components/TimerControlsView.swift` - Component for timer control buttons

### Key Technologies & Implementation Notes

1. **Timer Core Functionality:**
   - Use `Timer` class from Foundation for basic timing
   - Implement a more robust timing mechanism using `Date` comparisons for accurate time tracking

2. **Background Mode Support:**
   - Add the "Background Modes" capability to the app's entitlements
   - Select "Audio, AirPlay, and Picture in Picture" background mode to allow timer to run in background
   - Implement background task handling using `UIApplication.shared.beginBackgroundTask`

3. **SwiftUI Implementation:**
   - Use `