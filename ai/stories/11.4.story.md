# Story 11.4: Integrate Streak Display

**Status:** Draft

## Goal & Context

**User Story:** As a Developer, I want to integrate the session streak display component (logic from Epic 8, Story 8.1) into the Dashboard layout.

**Context:**
This story builds upon the Dashboard structure and quick log access (Stories 11.1â€“11.3). The goal is to fetch and display the user's current session streak on the Dashboard/Home screen, providing motivational feedback and reinforcing consistent practice. The streak logic and display are defined in Epic 8, Story 8.1, and must be visually consistent with the UI/UX spec and style guide. This is a key gamification element for user engagement.

## Detailed Requirements

- Fetch the user's current session streak data from their Firestore profile.
- Display the streak number along with its associated icon (e.g., flame) in the designated dashboard section.
- Ensure this display updates correctly when the user logs sessions that affect the streak.

## Acceptance Criteria (ACs)

- AC1: The user's current session streak is correctly displayed on the Dashboard.
- AC2: The visual presentation matches the intended design (number + icon).

## Technical Implementation Context

**Guidance:** Follow project standards in [coding-standards.md](mdc:docs/coding-standards.md) and [project-structure.md](mdc:docs/project-structure.md). Only story-specific details are included below.

- **Relevant Files:**
  - Files to Modify: [Growth/Features/Dashboard/Views/DashboardView.swift](mdc:Growth/Features/Dashboard/Views/DashboardView.swift)
  - (If needed) Add/modify supporting files for Firestore data access (e.g., user profile service/model)

- **Key Technologies:**
  - Swift, SwiftUI
  - Firebase Firestore (user profile data)

- **API Interactions / SDK Usage:**
  - Read the user's streak data from their Firestore user document (`users/{userId}`), as defined in [data-models.md](mdc:docs/data-models.md#user-model)
  - Update the streak display in real time or on view refresh after session log

- **UI/UX Notes:**
  - The streak display should use the flame icon (see [style-guide.md](mdc:docs/style-guide.md#icons)), Core Green and accent colors, and the correct font/typography for numbers/labels
  - Layout and spacing must match the Dashboard section in the Figma and [ui-ux-spec.md](mdc:docs/ui-ux-spec.md)
  - The streak number and icon should be visually prominent but not overwhelming

- **Data Structures:**
  - User streak data is stored in the Firestore user profile (see [data-models.md](mdc:docs/data-models.md#user-model))
  - Streak logic: see [epic8.md](mdc:docs/epic8.md#story-81-session-streaks-logic--display)

- **Environment Variables:**
  - Firebase configuration (already set up for the app)

- **Coding Standards Notes:**
  - Follow standards in [coding-standards.md](mdc:docs/coding-standards.md)

## Tasks / Subtasks

- [ ] Fetch the user's current streak value from Firestore when the Dashboard loads
- [ ] Display the streak number and flame icon in the Dashboard's Streak/Badge section
- [ ] Ensure the display updates after a session is logged (real time or on refresh)
- [ ] Style the display per the style guide and Figma (colors, font, icon size, spacing)
- [ ] Add accessibility labels for the streak display
- [ ] Remove or refactor mock/sample streak data

## Testing Requirements

**Guidance:** Verify implementation against the ACs using the following tests. Follow general testing approach in [testing-strategy.md](mdc:docs/testing-strategy.md).

- **Unit Tests:**
  - Test streak calculation logic (if any is implemented client-side)
  - Test Firestore data fetch and error handling
- **Integration Tests:**
  - Verify that the streak display updates when a session is logged
- **Manual/CLI Verification:**
  - Log sessions on different days and verify streak increments, resets, and display
  - Confirm UI matches Figma and style guide (font, color, icon, spacing)
  - Test accessibility (VoiceOver reads streak info)

## Story Wrap Up (Agent Populates After Execution)

- **Agent Model Used:** `<Agent Model Name/Version>`
- **Completion Notes:** {Any notes about implementation choices, difficulties, or follow-up needed}
- **Change Log:**
  - Initial Draft 