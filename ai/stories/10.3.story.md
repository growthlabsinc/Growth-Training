# Story 10.3: Refine and Finalize In-App Disclaimers, Privacy Policy, and Terms of Use

**Status:** Draft

## Goal & Context

**User Story:** As a User, I want to have access to clear, comprehensive, and accurate legal information (disclaimers, privacy policy, terms) within the app at all times.

**Context:** Following the implementation of data encryption (Story 10.1) and user data deletion mechanisms (Story 10.2), this story focuses on ensuring that users have transparent access to all legal information governing their use of the Growth app. This includes medical disclaimers, privacy policies, and terms of use that accurately reflect the app's functionality, data handling practices, and user rights. These documents are critical for both legal compliance and building user trust.

## Detailed Requirements

- Work with Legal/Content team to finalize the text for:
  - Medical Disclaimers (general and method-specific if any).
  - Privacy Policy (detailing data collection, storage, usage, user rights, HIPAA/GDPR info).
  - Terms of Use.
- Ensure these documents are easily accessible from within the app's settings menu after onboarding.
- Ensure the versions accepted during onboarding (Story 2.3, 2.4) are correctly referenced/stored.
- Verify Privacy Policy addresses data used by AI Chat Coach and analytics.

## Acceptance Criteria

- AC1: Finalized legal texts for disclaimers, privacy policy, and terms are integrated into the app.
- AC2: Users can access this information from a clearly marked section in settings.
- AC3: Privacy Policy accurately reflects all data processing activities in the MVP, including AI and analytics.

## Technical Implementation Context

- **Relevant Files:**
  - Files to Create: 
    - `Growth/Features/Settings/LegalDocumentsView.swift`
    - `Growth/Features/Settings/PrivacyPolicyView.swift`
    - `Growth/Features/Settings/TermsOfUseView.swift`
    - `Growth/Features/Settings/DisclaimersView.swift`
    - `Growth/Core/Models/LegalDocument.swift`
    - `Growth/Core/Services/LegalDocumentService.swift`
  
  - Files to Modify: 
    - `Growth/Features/Settings/SettingsView.swift` (to add navigation links)
    - `Growth/Features/Onboarding/OnboardingViewModel.swift` (to ensure version tracking)

- **Key Technologies:**
  - SwiftUI for creating document viewer interfaces
  - Firestore for storing document versions and user acceptance records
  - UserDefaults for storing local preferences about document versions
  - Firebase Remote Config for potential dynamic document content

- **Data Structures:**
  - `LegalDocument` model to represent policy documents:
    ```swift
    struct LegalDocument {
        let id: String
        let title: String
        let content: String
        let version: String
        let lastUpdated: Date
    }
    ```
  
  - `DocumentAcceptance` model to track user acceptance:
    ```swift
    struct DocumentAcceptance {
        let userId: String
        let documentId: String
        let documentVersion: String
        let acceptedAt: Date
    }
    ```

- **UI/UX Notes:**
  - Legal documents should be properly formatted with headers, bullet points, and section breaks
  - Font size should be readable (minimum 13pt)
  - Provide ability to increase text size for accessibility
  - Include a search function for longer documents
  - Each document should display version number and last updated date

- **Coding Standards Notes:**
  - Use Markdown formatting for legal documents to maintain consistent styling
  - Legal text content should be stored as separate text files or in Firestore, not hardcoded
  - Version tracking should be robust to allow for future document updates

## Tasks / Subtasks

- [ ] Create `LegalDocument` model
  - [ ] Define properties for documents (ID, title, content, version, lastUpdated)
  - [ ] Add methods for comparing versions
  
- [ ] Implement `LegalDocumentService` 
  - [ ] Add methods to fetch latest document versions from Firestore
  - [ ] Add methods to check if user has accepted latest versions
  - [ ] Add methods to record user acceptance of documents
  
- [ ] Create UI components for document viewers
  - [ ] Implement `LegalDocumentsView` as a hub for all legal documents
  - [ ] Implement individual document viewers with proper text formatting
  - [ ] Ensure accessibility features (text scaling, etc.)
  
- [ ] Modify Settings screen to include Legal Documents section
  - [ ] Add navigation links for Privacy Policy, Terms of Use, and Disclaimers
  - [ ] Display document version and last updated date
  
- [ ] Update OnboardingViewModel to properly record document acceptances
  - [ ] Ensure accepted version information is stored in Firestore
  - [ ] Add mechanism to prompt for acceptance if documents are updated
  
- [ ] Implement document versioning and comparison logic
  - [ ] Create system to check if user has accepted the latest version
  - [ ] Add logic to notify users of updated documents requiring acceptance
  
- [ ] Create and integrate the content for each document type
  - [ ] Privacy Policy covering all data practices, including AI and analytics
  - [ ] Terms of Use defining app usage rules
  - [ ] Medical Disclaimers (general and method-specific)

## Testing Requirements

- **Unit Tests:**
  - Test version comparison logic in `LegalDocument` model
  - Test `LegalDocumentService` methods for fetching documents and recording acceptance
  - Test document persistence and retrieval

- **Integration Tests:**
  - Verify document content is properly displayed in the UI
  - Test the complete flow of fetching, displaying, and accepting documents
  - Verify document acceptance is correctly recorded in Firestore

- **Manual Verification:**
  - Ensure all document content is properly formatted and readable
  - Verify accessibility features work correctly
  - Test navigation between different document types
  - Verify version tracking by updating a document and checking if the app detects the change

## Notes

- Legal document content will need to be reviewed by qualified legal professionals before implementation
- Consider implementing a mechanism for automatically notifying users when documents are updated and require new acceptance
- Documents should be designed to be easily updatable without requiring an app update (store in Firestore or use Remote Config)
- For international users, consider future support for localized versions of legal documents 