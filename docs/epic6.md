# Epic 6: AI Chat Coach (Growth Coach) - MVP Implementation

**Goal:** Integrate an initial version of the AI Chat Coach ("Growth Coach") that can answer user questions about Growth Methods (as presented in the app), provide motivational support based on user progress/inputs (future integration), and help users navigate app content, using a curated knowledge base and providing clear disclaimers.

## Story List

### Story 6.1: AI Chat Coach UI - Basic Chat Interface
- **User Story / Goal:** As a User, I want a simple chat interface where I can type questions and view responses from the AI Growth Coach.
- **Detailed Requirements:**
  - Design and implement a "Coach" screen with a text input field for user queries and a scrollable view for displaying the conversation history (user messages and AI responses).
  - User messages and AI responses should be visually distinct (e.g., different bubble colors/alignment).
  - Conversation history should persist locally for the current session (full persistence TBD, could be Firestore based in future).
  - UI adheres to `docs/style-guide.md` and `docs/ui-ux-spec.md` (calm, professional, supportive).
- **Acceptance Criteria (ACs):**
  - AC1: User can type a message into a text input field and send it.
  - AC2: Sent messages and AI responses are displayed in a chat-like, scrollable view.
  - AC3: Input field clears after sending a message.
  - AC4: Basic UI styling is applied as per the style guide.

### Story 6.2: Connect to AI Backend (Vertex AI) for Response Generation
- **User Story / Goal:** As a User, when I send a question to the AI Growth Coach, I want the app to communicate with the AI backend (Vertex AI Search/Conversation with Gemini) and display the generated response.
- **Detailed Requirements:**
  - Implement client-side logic to send the user's query to a Firebase Function (or directly to a secured Vertex AI endpoint if architected that way).
  - The backend function will interact with Vertex AI Search (to retrieve relevant context from the curated knowledge base) and a Gemini model (to generate a response based on the query and retrieved context).
  - Display the AI-generated text response in the chat UI.
  - Implement loading indicators while waiting for the AI response.
  - Handle potential errors from the AI backend (e.g., network issues, AI service errors) gracefully, displaying a user-friendly error message.
- **Acceptance Criteria (ACs):**
  - AC1: User's question is successfully sent to the backend AI service.
  - AC2: A text response generated by the AI service (based on sample knowledge base content) is displayed in the chat UI.
  - AC3: A loading indicator is shown while the AI is processing.
  - AC4: Network errors or AI service errors are handled gracefully.

### Story 6.3: AI Coach Disclaimer Presentation
- **User Story / Goal:** As a User, I want to be clearly informed about the AI Growth Coach's capabilities and limitations (i.e., it's not a human, not medical advice) before or during my first interaction.
- **Detailed Requirements:**
  - Before the user can send their first message to the AI Coach, or prominently displayed at the top of the chat interface, show a clear disclaimer.
  - Disclaimer content (to be finalized, example): "Growth Coach is an AI assistant trained on app content. It can help answer questions about Growth Methods and app navigation. It cannot provide medical advice. For medical concerns, please consult a healthcare professional." 
  - This disclaimer should be easily accessible even after the first interaction (e.g., via an info icon).
- **Acceptance Criteria (ACs):**
  - AC1: AI Coach disclaimer is displayed to the user before they can type their first message or is persistently visible.
  - AC2: Disclaimer content is clear and meets the specified requirements.
  - AC3: The mechanism for displaying the disclaimer does not obstruct normal use after acknowledgment if applicable.

### Story 6.4: Handling Out-of-Scope Questions by AI Coach
- **User Story / Goal:** As a User, if I ask the AI Growth Coach a question outside its trained knowledge or about medical advice, I want to receive a polite and clear response stating its limitations.
- **Detailed Requirements:**
  - Configure the AI backend (prompts for Gemini, or Dialogflow CX configurations) to identify questions that are:
    - Seeking medical advice.
    - Outside the scope of the curated Growth Method and app content knowledge base.
  - For such questions, the AI should respond with a pre-defined, polite message indicating it cannot answer that type of question and reiterating its purpose/limitations (e.g., "I can only provide information about the Growth Methods as presented in this app. For medical advice, please see a doctor.").
- **Acceptance Criteria (ACs):**
  - AC1: When a user asks for medical advice, the AI responds with a polite refusal and directs to a medical professional.
  - AC2: When a user asks a question clearly outside the app's content (e.g., "What's the weather?"), the AI responds indicating its limited scope of knowledge.
  - AC3: Responses for out-of-scope questions are consistent and do not attempt to invent answers.

### Story 6.5: AI Knowledge Base Content - Initial Curation & Ingestion
- **User Story / Goal:** As a PM/Content Team, I want the initial set of curated content (Growth Method instructions, educational articles already in Firestore) to be prepared and ingested into the Vertex AI Search datastore, so the AI Coach has foundational knowledge.
- **Detailed Requirements:**
  - Identify all existing Growth Method instructional content (from Epic 3) and Educational Resource content (from Epic 5) that will form the initial knowledge base.
  - Format this content as needed for ingestion into Vertex AI Search (e.g., plain text, structured JSON/CSV if applicable).
  - Create a document `docs/ai-knowledge-base-sources.md` listing all documents/sources approved for AI training.
  - Upload this curated content set into the designated Vertex AI Search datastore.
  - Verify content is indexed and searchable via Vertex AI console.
- **Acceptance Criteria (ACs):**
  - AC1: Instructional content from at least 5-7 Growth Methods is ingested into Vertex AI Search.
  - AC2: Content from at least 3-5 Educational Resources is ingested into Vertex AI Search.
  - AC3: `docs/ai-knowledge-base-sources.md` is created and lists the ingested content.
  - AC4: Ingested content can be successfully retrieved via test queries in the Vertex AI console.

## Change Log

| Date       | Version | Description     | Author   |
| :--------- | :------ | :-------------- | :------- |
| 2025-05-08 | 0.1     | Initial Draft   | 2 - PM   |