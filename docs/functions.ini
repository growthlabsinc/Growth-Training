functions/
├── main.py                     // Main entry point for deploying all functions
├── requirements.txt            // Python dependencies
├── .firebaserc                 // Firebase project configuration
├── firebase.json               // Firebase deployment configuration (functions, firestore rules, etc.)
│
├── src/                        // Source code for the functions
│   ├── __init__.py
│   ├── ai_coach/               // Logic related to the AI Chat Coach
│   │   ├── __init__.py
│   │   ├── handler.py          // Main callable function for AI coach queries (processGrowthCoachQuery)
│   │   ├── RAGOrchestrator.py  // Class/module for RAG logic (Vertex Search, Gemini calls)
│   │   ├── prompt_manager.py   // Logic for constructing and managing prompts
│   │   └── history_manager.py  // Logic for retrieving/storing conversation history
│   │
│   ├── knowledge_base/         // Functions for managing knowledge base ingestion
│   │   ├── __init__.py
│   │   ├── firestore_triggers.py // Firestore-triggered function for KB updates to Vertex AI Search
│   │   └── vertex_ai_search_admin.py // Utilities for interacting with Vertex AI Search admin APIs
│   │
│   ├── user_management/        // Functions related to user data management (e.g., GDPR erasure)
│   │   ├── __init__.py
│   │   └── data_deletion.py    // Callable function for handling user data deletion requests
│   │
│   ├── core/                   // Shared utilities for backend functions
│   │   ├── __init__.py
│   │   ├── config.py           // Configuration loading (e.g., project ID, regions)
│   │   ├── dlp_service.py      // Wrapper for Cloud DLP API interactions
│   │   ├── error_handler.py    // Common error handling utilities
│   │   └── gcp_clients.py      // Centralized initialization for GCP service clients (Vertex AI, Firestore Admin)
│   │
│   └── (other_feature_specific_functions)/ // e.g., for complex gamification logic if needed
│
├── firestore.rules             // Firestore security rules
├── storage.rules               // Cloud Storage security rules (if used)
│
└── tests/                      // Unit tests for Cloud Functions
    ├── __init__.py
    ├── ai_coach/
    └── ...