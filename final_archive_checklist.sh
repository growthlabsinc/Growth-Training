#!/bin/bash

echo "‚úÖ FINAL ARCHIVE CHECKLIST"
echo "========================="
echo ""
echo "‚úì All build artifacts cleaned"
echo "‚úì Automatic signing enabled for both targets"
echo "‚úì Bundle IDs corrected:"
echo "  - App (Release): com.growthlabs.growthmethod ‚úÖ"
echo "  - Widget (Release): com.growthlabs.growthmethod.GrowthTimerWidget ‚úÖ"
echo "‚úì Development Team: 62T6J77P6R (Growth Labs, Inc)"
echo "‚úì App exists in App Store Connect (ID: 6748406423)"
echo ""
echo "üéØ ARCHIVE INSTRUCTIONS:"
echo "========================"
echo ""
echo "1. Open Xcode"
echo ""
echo "2. IMPORTANT: Check your Apple ID:"
echo "   ‚Üí Xcode ‚Üí Settings ‚Üí Accounts"
echo "   ‚Üí Make sure you're signed in"
echo "   ‚Üí If issues, remove and re-add your Apple ID"
echo ""
echo "3. Select destination:"
echo "   ‚Üí In the toolbar, change from simulator to 'Any iOS Device (arm64)'"
echo ""
echo "4. Clean and Archive:"
echo "   ‚Üí Product ‚Üí Clean Build Folder (Shift+Cmd+K)"
echo "   ‚Üí Product ‚Üí Archive"
echo "   ‚Üí Wait for completion (may take 5-10 minutes)"
echo ""
echo "5. In the Organizer window:"
echo "   ‚Üí Select your archive"
echo "   ‚Üí Click 'Distribute App'"
echo "   ‚Üí You should see:"
echo "     ‚Ä¢ App Store Connect ‚Üê Select this"
echo "     ‚Ä¢ TestFlight Internal Only"
echo "     ‚Ä¢ Custom"
echo ""
echo "6. Follow the wizard:"
echo "   ‚Üí Choose 'Upload' (or 'Export' for later)"
echo "   ‚Üí Let Xcode manage signing"
echo "   ‚Üí Upload to App Store Connect"
echo ""
echo "üö® IF YOU STILL ONLY SEE 'CUSTOM':"
echo "==================================="
echo "This means one of these issues:"
echo ""
echo "1. Account permissions:"
echo "   ‚Üí Go to https://appstoreconnect.apple.com/access/users"
echo "   ‚Üí Verify you have 'Admin' or 'App Manager' role"
echo "   ‚Üí If not, ask your team admin to upgrade your role"
echo ""
echo "2. Team membership:"
echo "   ‚Üí Go to https://developer.apple.com/account"
echo "   ‚Üí Verify your team membership is active"
echo "   ‚Üí Check that it's not expired"
echo ""
echo "3. Xcode account issue:"
echo "   ‚Üí Sign out completely from Xcode"
echo "   ‚Üí Quit Xcode"
echo "   ‚Üí Delete ~/Library/Developer/Xcode/DerivedData/"
echo "   ‚Üí Reopen Xcode and sign in again"
echo ""
echo "Ready to archive! Good luck! üöÄ"